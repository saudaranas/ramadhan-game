<!doctype html>
<html lang="ms" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Ramadhan Aidin by Babah</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Baloo 2', cursive; }
    @keyframes bounce-pop { 0% { transform: scale(0); opacity: 0; } 70% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
    @keyframes float-bg { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 10% { opacity: 0.3; } 90% { opacity: 0.3; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }
    .bg-item { position: absolute; bottom: -100px; font-size: 2rem; pointer-events: none; z-index: 1; animation: float-bg 15s linear infinite; }
    .aidin-pop { position: fixed; top: 120px; width: 140px; z-index: 100; display: none; animation: bounce-pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    .aidin-left { left: 20px; } .aidin-right { right: 20px; }
    .aidin-container { width: 95px; height: 95px; margin: 0 auto; border-radius: 50%; border: 4px solid #FFD700; overflow: hidden; background: #fff; box-shadow: 0 8px 20px rgba(0,0,0,0.4); }
    .aidin-img { width: 100%; height: 100%; object-fit: cover; }
    .bubble { background: white; padding: 6px 10px; border-radius: 12px; font-weight: bold; font-size: 12px; margin-top: 5px; text-align: center; border: 2px solid #FFD700; color: #333; }
    .timer-container { width: 100%; background: rgba(255,255,255,0.1); height: 12px; border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
    #timer-bar { height: 100%; width: 100%; background: #fbbf24; transition: width 0.1s linear; }
    .card { cursor: pointer; transform-style: preserve-3d; transition: transform 0.5s; height: 100px; position: relative; }
    .card.flipped { transform: rotateY(180deg); }
    .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 15px; font-weight: bold; padding: 5px; text-align: center; }
    .card-front { background: #4f46e5; color: white; border: 2px solid rgba(255,255,255,0.2); font-size: 24px; }
    .card-back { background: white; color: #1e1b4b; transform: rotateY(180deg); border: 3px solid #FFD700; font-size: 14px; }
  </style>
</head>
<body class="h-full overflow-hidden bg-[#1a1a3e]">
  <div id="app" class="min-h-full w-full relative overflow-hidden flex items-center justify-center" style="background: linear-gradient(180deg, #1a1a3e 0%, #2d1b4e 100%);">
    <div id="background-elements" class="fixed inset-0 pointer-events-none"></div>
    <div id="aidin-reaction" class="aidin-pop">
        <div class="aidin-container"><img id="aidin-face" src="" class="aidin-img"></div>
        <div id="aidin-bubble" class="bubble">Wah!</div>
    </div>

    <div class="relative z-10 w-full max-w-lg p-4 flex flex-col items-center">
      <div class="mb-6 text-center">
          <h2 class="text-white/60 text-xs tracking-[0.3em] uppercase font-black mb-1">Game Ramadhan Aidin</h2>
          <p class="text-pink-400 text-sm font-bold tracking-widest uppercase">by Babah ‚ù§Ô∏è</p>
      </div>

      <div id="home-screen" class="text-center w-full">
        <div class="text-7xl mb-4">üåô</div>
        <div class="grid grid-cols-1 gap-4 mb-8">
          <button onclick="startGame('quiz')" class="bg-emerald-500 text-white text-2xl font-bold py-5 rounded-3xl shadow-lg hover:scale-105 border-b-8 border-emerald-700 transition-all">Kuiz Ramadhan üïå</button>
          <button onclick="startGame('collect')" class="bg-purple-500 text-white text-2xl font-bold py-5 rounded-3xl shadow-lg hover:scale-105 border-b-8 border-purple-700 transition-all">Kira Bintang ‚≠ê</button>
          <button onclick="startGame('memory')" class="bg-orange-500 text-white text-2xl font-bold py-5 rounded-3xl shadow-lg hover:scale-105 border-b-8 border-orange-700 transition-all">Kad Memori üé¥</button>
        </div>
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 w-full border border-white/20">
            <p class="text-white/40 text-[10px] uppercase font-bold mb-2 tracking-widest">Rekod Peribadi Aidin</p>
            <div class="grid grid-cols-3 gap-2 text-[10px] text-white/80">
                <div>KUIZ: <span id="rec-quiz" class="text-yellow-400 font-bold">-</span></div>
                <div>BINTANG: <span id="rec-collect" class="text-yellow-400 font-bold">-</span></div>
                <div>MEMORI: <span id="rec-memory" class="text-yellow-400 font-bold">-</span></div>
            </div>
        </div>
      </div>

      <div id="game-screen" class="hidden text-center w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-white/20 relative">
          <div class="flex justify-between items-center mb-4">
            <div id="game-label" class="text-yellow-300 text-xs font-black uppercase tracking-widest">Masa: <span id="live-timer">0</span>s</div>
            <div class="bg-indigo-600 text-white px-4 py-1 rounded-full font-black text-sm">‚≠ê <span id="current-score">0</span></div>
          </div>
          <div class="timer-container"><div id="timer-bar"></div></div>
          <div id="quiz-area" class="hidden">
            <h2 id="question-text" class="text-2xl font-bold text-white mb-8 min-h-[70px]"></h2>
            <div id="answers-container" class="grid grid-cols-1 gap-4"></div>
          </div>
          <div id="collect-area" class="hidden relative h-72 bg-indigo-950/40 rounded-3xl overflow-hidden border border-white/10"></div>
          <div id="memory-area" class="hidden grid grid-cols-3 gap-3"></div>
        </div>
      </div>

      <div id="result-screen" class="hidden text-center w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-[3rem] p-12 shadow-2xl border border-white/20">
          <h2 id="result-title" class="text-4xl font-black text-yellow-300 mb-4">Tamat!</h2>
          <div class="space-y-2 mb-8 text-white">
            <p class="text-xl">Bintang: <span id="result-stars" class="text-yellow-400 font-black">0</span></p>
            <p class="text-lg opacity-80">Masa Diambil: <span id="result-time" class="font-bold">0</span> saat</p>
          </div>
          <button onclick="location.reload()" class="w-full bg-emerald-500 text-white font-black py-5 rounded-2xl text-2xl border-b-8 border-emerald-700 transition-all">Main Lagi üöÄ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const GAMBAR_AIDIN_SENYUM = "https://i.postimg.cc/Bbz5NjGs/happy.jpg"; 
    const GAMBAR_AIDIN_SEDIH = "https://i.postimg.cc/fWPYGS6w/sad.jpg";   
    const SOUND_BETUL = new Audio("https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3");
    const SOUND_SALAH = new Audio("https://assets.mixkit.co/active_storage/sfx/2959/2959-preview.mp3");

    let score = 0, currentMode = '', timer, startTime, totalTimeSpent = 0;
    let memoryMatches = 0;

    // Load Rekod
    function loadRecords() {
        document.getElementById('rec-quiz').textContent = localStorage.getItem('aidin_quiz') || '-';
        document.getElementById('rec-collect').textContent = localStorage.getItem('aidin_collect') || '-';
        document.getElementById('rec-memory').textContent = (localStorage.getItem('aidin_memory_time') || '-') + 's';
    }
    loadRecords();

    function reactAidin(isCorrect, msg) {
        const div = document.getElementById('aidin-reaction');
        const img = document.getElementById('aidin-face');
        const bub = document.getElementById('aidin-bubble');
        div.classList.remove('aidin-left', 'aidin-right');
        div.classList.add(Math.random() > 0.5 ? 'aidin-left' : 'aidin-right');
        div.style.display = 'block';
        if(isCorrect) { img.src = GAMBAR_AIDIN_SENYUM; bub.textContent = msg || "Pintar!"; SOUND_BETUL.play(); }
        else { img.src = GAMBAR_AIDIN_SEDIH; bub.textContent = "Alahai..."; SOUND_SALAH.play(); }
        setTimeout(() => div.style.display = 'none', 1500);
    }

    // GAME 1: KUIZ (10 soalan rawak)
    const allQuestions = [{ q: 'Makan sebelum Subuh?', a: ['Sahur', 'Berbuka'], c: 0 },{ q: 'Buah sunnah berbuka?', a: ['Kurma', 'Epal'], c: 0 },{ q: 'Solat malam Ramadhan?', a: ['Tarawih', 'Zohor'], c: 0 },{ q: 'Boleh makan sengaja?', a: ['Tak Boleh', 'Boleh'], c: 0 },{ q: 'Lepas Ramadhan sambut?', a: ['Hari Raya', 'Hari Jadi'], c: 0 }];
    let qIdx = 0, quizSet = [];

    function startQuiz() {
        qIdx = 0; quizSet = allQuestions.sort(() => Math.random() - 0.5).slice(0,5);
        showQuestion();
    }
    function showQuestion() {
        if(qIdx >= quizSet.length) return finish();
        const q = quizSet[qIdx];
        document.getElementById('question-text').textContent = q.q;
        const cont = document.getElementById('answers-container');
        cont.innerHTML = '';
        q.a.forEach((ans, i) => {
            const b = document.createElement('button');
            b.className = 'bg-white/10 p-5 rounded-2xl text-white font-bold text-xl border border-white/10';
            b.textContent = ans;
            b.onclick = () => {
                if(i === q.c) { score += 10; reactAidin(true); } else reactAidin(false);
                qIdx++; document.getElementById('current-score').textContent = score;
                showQuestion();
            };
            cont.appendChild(b);
        });
    }

    // GAME 2: TANGKAP BINTANG
    function startCollect() {
        let count = 0;
        let spawn = setInterval(() => {
            if(currentMode !== 'collect' || totalTimeSpent >= 20) { clearInterval(spawn); return; }
            const s = document.createElement('div');
            s.className = 'absolute text-5xl cursor-pointer';
            s.style.left = Math.random() * 80 + 10 + '%'; s.style.top = Math.random() * 80 + 10 + '%';
            s.textContent = '‚≠ê';
            s.onclick = () => { score += 2; document.getElementById('current-score').textContent = score; s.remove(); };
            document.getElementById('collect-area').appendChild(s);
            setTimeout(() => s.remove(), 1000);
        }, 600);
    }

    // GAME 3: MEMORI
    const memData = [{ img: 'üïå', txt: 'Masjid' }, { img: 'üå¥', txt: 'Kurma' }, { img: 'üåô', txt: 'Bulan' }];
    function startMemory() {
        memoryMatches = 0;
        const area = document.getElementById('memory-area'); area.innerHTML = '';
        let cards = []; memData.forEach(d => { cards.push({ v: d.img, id: d.img }); cards.push({ v: d.txt, id: d.img }); });
        cards.sort(() => Math.random() - 0.5).forEach(data => {
            const c = document.createElement('div');
            c.className = 'card';
            c.innerHTML = `<div class="card-face card-front">üïå</div><div class="card-face card-back">${data.v}</div>`;
            c.onclick = () => {
                if(flipped.length < 2 && !c.classList.contains('flipped')) {
                    c.classList.add('flipped'); flipped.push({ el: c, id: data.id });
                    if(flipped.length === 2) {
                        if(flipped[0].id === flipped[1].id) {
                            score += 15; memoryMatches++; reactAidin(true, "Padan!"); flipped = [];
                            if(memoryMatches === memData.length) setTimeout(finish, 500);
                        } else { setTimeout(() => { flipped.forEach(f => f.el.classList.remove('flipped')); flipped = []; }, 800); }
                        document.getElementById('current-score').textContent = score;
                    }
                }
            };
            area.appendChild(c);
        });
    }
    let flipped = [];

    function startTimer() {
        startTime = Date.now();
        const bar = document.getElementById('timer-bar');
        const limit = (currentMode === 'memory' ? 60 : (currentMode === 'collect' ? 20 : 60));
        timer = setInterval(() => {
            totalTimeSpent = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById('live-timer').textContent = totalTimeSpent;
            let progress = 100 - (totalTimeSpent / limit * 100);
            bar.style.width = Math.max(0, progress) + '%';
            if(totalTimeSpent >= limit) finish();
        }, 100);
    }

    function startGame(mode) {
        currentMode = mode; score = 0; totalTimeSpent = 0;
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');
        ['quiz-area','collect-area','memory-area'].forEach(a => document.getElementById(a).classList.add('hidden'));
        document.getElementById(mode + '-area').classList.remove('hidden');
        startTimer();
        if(mode === 'quiz') startQuiz();
        if(mode === 'collect') startCollect();
        if(mode === 'memory') startMemory();
    }

    function finish() {
        clearInterval(timer);
        document.getElementById('game-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-stars').textContent = score;
        document.getElementById('result-time').textContent = totalTimeSpent;

        // Simpan Rekod
        if(currentMode === 'quiz') {
            let old = localStorage.getItem('aidin_quiz') || 0;
            if(score > old) localStorage.setItem('aidin_quiz', score);
        } else if(currentMode === 'collect') {
            let old = localStorage.getItem('aidin_collect') || 0;
            if(score > old) localStorage.setItem('aidin_collect', score);
        } else if(currentMode === 'memory') {
            let old = localStorage.getItem('aidin_memory_time') || 999;
            if(totalTimeSpent < old) localStorage.setItem('aidin_memory_time', totalTimeSpent);
        }
    }

    const bg = document.getElementById('background-elements');
    const items = ['üïå', 'üå¥', 'üü¢', '‚≠ê'];
    setInterval(() => {
        const i = document.createElement('div'); i.className = 'bg-item';
        i.textContent = items[Math.floor(Math.random()*items.length)];
        i.style.left = Math.random()*100+'%'; bg.appendChild(i);
        setTimeout(() => i.remove(), 15000);
    }, 2500);
  </script>
</body>
</html>
