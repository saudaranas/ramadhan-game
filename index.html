<!doctype html>
<html lang="ms" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Ramadhan Aidin by Babah</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Baloo 2', cursive; }
    @keyframes bounce-pop { 0% { transform: scale(0); opacity: 0; } 70% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
    @keyframes float-bg { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }
    .bg-item { position: absolute; bottom: -100px; font-size: 2.5rem; pointer-events: none; z-index: 1; animation: float-bg 12s linear infinite; }
    
    .aidin-pop { position: fixed; top: 110px; width: 130px; z-index: 100; display: none; animation: bounce-pop 0.5s forwards; }
    .aidin-left { left: 20px; } .aidin-right { right: 20px; }
    .aidin-container { width: 90px; height: 90px; margin: 0 auto; border-radius: 50%; border: 4px solid #FFD700; overflow: hidden; background: #fff; box-shadow: 0 8px 20px rgba(0,0,0,0.4); }
    .aidin-img { width: 100%; height: 100%; object-fit: cover; }
    .bubble { background: white; padding: 5px 10px; border-radius: 12px; font-weight: bold; font-size: 11px; margin-top: 5px; text-align: center; border: 2px solid #FFD700; color: #333; }
    
    .timer-container { width: 100%; background: rgba(255,255,255,0.1); height: 12px; border-radius: 10px; overflow: hidden; margin-bottom: 20px; }
    #timer-bar { height: 100%; width: 100%; background: #fbbf24; transition: width 0.1s linear; }
    
    .hijaiyah-box { cursor: pointer; background: white; color: #1e1b4b; border-radius: 15px; font-size: 2rem; font-weight: 800; display: flex; align-items: center; justify-content: center; height: 65px; border-bottom: 5px solid #cbd5e1; }
    .hijaiyah-target { border: 2px dashed rgba(255,255,255,0.2); border-radius: 15px; height: 65px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; }
    
    .card { cursor: pointer; transform-style: preserve-3d; transition: transform 0.5s; height: 100px; position: relative; }
    .card.flipped { transform: rotateY(180deg); }
    .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 20px; font-weight: bold; border: 2px solid rgba(255,255,255,0.1); }
    .card-front { background: #4f46e5; color: white; font-size: 30px; }
    .card-back { background: white; color: #1e1b4b; transform: rotateY(180deg); border: 4px solid #FFD700; font-size: 14px; }
    
    .footer-sifir { position: fixed; bottom: 0; left: 0; width: 100%; padding: 12px; background: rgba(0,0,0,0.4); backdrop-filter: blur(8px); z-index: 50; display: flex; justify-content: center; }
    .btn-sifir { background: linear-gradient(135deg, #FF6B6B, #EE5253); color: white; font-weight: 800; padding: 8px 20px; border-radius: 50px; box-shadow: 0 4px 15px rgba(238, 82, 83, 0.4); font-size: 13px; }
  </style>
</head>
<body class="h-full overflow-hidden bg-[#1a1a3e]">
  <div id="app" class="min-h-full w-full relative overflow-hidden flex items-center justify-center" style="background: linear-gradient(180deg, #1a1a3e 0%, #2d1b4e 100%);">
    
    <div id="background-elements" class="fixed inset-0 pointer-events-none"></div>

    <div id="aidin-reaction" class="aidin-pop">
        <div class="aidin-container"><img id="aidin-face" src="" class="aidin-img"></div>
        <div id="aidin-bubble" class="bubble">Wah!</div>
    </div>

    <div class="relative z-10 w-full max-w-lg p-4 flex flex-col items-center pb-20">
      <div class="mb-4 text-center">
          <h2 class="text-white/40 text-[10px] tracking-[0.4em] uppercase font-black">Game Ramadhan Aidin</h2>
          <p class="text-pink-400 text-sm font-bold tracking-widest uppercase">by Babah ‚ù§Ô∏è</p>
      </div>

      <div id="home-screen" class="text-center w-full">
        <div class="text-6xl mb-4">üåô</div>
        <div class="grid grid-cols-2 gap-3 mb-6">
          <button onclick="startGame('quiz')" class="bg-emerald-500 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-emerald-700">KUIZ üïå</button>
          <button onclick="startGame('collect')" class="bg-purple-500 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-purple-700">BINTANG ‚≠ê</button>
          <button onclick="startGame('memory')" class="bg-orange-600 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-orange-800">MEMORI üé¥</button>
          <button onclick="startGame('sedekah')" class="bg-yellow-500 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-yellow-700">SEDEKAH üí∞</button>
          <button onclick="startGame('amalan')" class="bg-pink-500 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-pink-700">AMALAN ‚ú®</button>
          <button onclick="startGame('hijaiyah')" class="bg-blue-500 text-white text-sm font-bold py-4 rounded-2xl shadow-lg border-b-4 border-blue-700">HIJAIYAH üìñ</button>
        </div>
        <div class="bg-white/10 backdrop-blur-md rounded-xl p-3 w-full border border-white/20">
            <p class="text-white/40 text-[9px] uppercase font-bold mb-2 tracking-widest">üèÜ REKOD TERBAIK</p>
            <div id="records-board" class="grid grid-cols-2 gap-2 text-[9px] text-white/90 text-left px-4 uppercase"></div>
        </div>
      </div>

      <div id="game-screen" class="hidden text-center w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-[2.5rem] p-6 shadow-2xl border border-white/20 relative min-h-[420px]">
          <div class="flex justify-between items-center mb-4 text-white">
            <div class="text-[10px] font-black uppercase tracking-widest">Masa: <span id="live-timer">0</span>s</div>
            <div class="bg-indigo-600 px-3 py-1 rounded-full font-black text-xs border border-indigo-400">‚≠ê <span id="current-score">0</span></div>
          </div>
          <div class="timer-container"><div id="timer-bar"></div></div>
          
          <div id="quiz-area" class="hidden"><h2 id="question-text" class="text-xl font-bold text-white mb-6 min-h-[60px]"></h2><div id="answers-container" class="grid grid-cols-1 gap-3"></div></div>
          <div id="collect-area" class="hidden relative h-64 bg-indigo-950/40 rounded-3xl overflow-hidden"></div>
          <div id="memory-area" class="hidden grid grid-cols-3 gap-2"></div>
          <div id="sedekah-area" class="hidden relative h-64 bg-yellow-900/10 rounded-3xl overflow-hidden"><div id="tabung" class="absolute bottom-2 left-1/2 -translate-x-1/2 text-5xl">üçØ</div></div>
          <div id="amalan-area" class="hidden relative h-64 bg-pink-900/10 rounded-3xl overflow-hidden"></div>
          <div id="hijaiyah-area" class="hidden">
              <p class="text-white/50 text-[10px] mb-2">Susun: <span id="hijaiyah-hint" class="text-yellow-300 font-black"></span></p>
              <div id="hijaiyah-targets" class="grid grid-cols-4 gap-2 mb-6"></div>
              <div id="hijaiyah-options" class="grid grid-cols-4 gap-2"></div>
          </div>
        </div>
      </div>

      <div id="result-screen" class="hidden text-center w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-[3rem] p-10 shadow-2xl border border-white/20">
          <h2 id="res-title" class="text-3xl font-black text-yellow-300 mb-6">Alhamdulillah!</h2>
          <div class="text-white mb-10"><p class="text-xl mb-1">Skor: <span id="result-stars" class="text-yellow-400 font-black">0</span> ‚≠ê</p><p class="text-xs opacity-60 uppercase">Masa: <span id="result-time">0</span> saat</p></div>
          <button onclick="location.reload()" class="w-full bg-emerald-500 text-white font-black py-4 rounded-xl text-xl border-b-4 border-emerald-700">Main Lagi üöÄ</button>
        </div>
      </div>
    </div>

    <div class="footer-sifir"><a href="https://saudaranas.github.io/game-sifir-aidin/" class="btn-sifir" target="_blank">üßÆ Jom Main Game Sifir! üöÄ</a></div>
  </div>

  <script>
    const GAMBAR_AIDIN_SENYUM = "https://i.postimg.cc/Bbz5NjGs/happy.jpg"; 
    const GAMBAR_AIDIN_SEDIH = "https://i.postimg.cc/fWPYGS6w/sad.jpg";   
    const hijaiyahFull = ['ÿß', 'ÿ®', 'ÿ™', 'ÿ´', 'ÿ¨', 'ÿ≠', 'kh', 'ÿØ', 'ÿ∞', 'ÿ±', 'ÿ≤', 'ÿ≥', 'sy', 'ÿµ', 'dho', 'tho', 'zho', 'ain', 'gho', 'ŸÅ', 'ŸÇ', 'ŸÉ', 'ŸÑ', 'ŸÖ', 'ŸÜ', 'Ÿà', 'Ÿá', 'ŸÑÿß', 'ÿ°', 'Ÿä'];
    const allQuiz = [{q:'Makan pagi puasa?',a:['Sahur','Berbuka'],c:0},{q:'Waktu berbuka azan apa?',a:['Maghrib','Isyak'],c:0},{q:'Buah sunnah berbuka?',a:['Kurma','Epal'],c:0},{q:'Siapa beri pahala?',a:['Allah','Kawan'],c:0},{q:'Boleh makan siang?',a:['Tak Boleh','Boleh'],c:0},{q:'Niat puasa bila?',a:['Malam','Siang'],c:0},{q:'Aidin budak yang?',a:['Budak Baik','Nakal'],c:0}];

    let score = 0, currentMode = '', timer, startTime, totalTimeSpent = 0;
    
    function loadRecords() {
        const board = document.getElementById('records-board'); board.innerHTML = '';
        ['quiz', 'collect', 'memory', 'sedekah', 'amalan', 'hijaiyah'].forEach(g => {
            board.innerHTML += `<div>${g}: <span class="text-yellow-400">${localStorage.getItem('aidin_s_'+g)||0}‚≠ê / ${localStorage.getItem('aidin_t_'+g)||'-'}s</span></div>`;
        });
    }
    loadRecords();

    function reactAidin(isCorrect, msg) {
        const div = document.getElementById('aidin-reaction');
        div.classList.remove('aidin-left', 'aidin-right'); div.classList.add(Math.random() > 0.5 ? 'aidin-left' : 'aidin-right');
        div.style.display = 'block'; document.getElementById('aidin-face').src = isCorrect ? GAMBAR_AIDIN_SENYUM : GAMBAR_AIDIN_SEDIH;
        document.getElementById('aidin-bubble').textContent = msg || (isCorrect ? "Bijak!" : "Alahai...");
        setTimeout(() => div.style.display = 'none', 1200);
    }

    function startGame(mode) {
        currentMode = mode; score = 0; totalTimeSpent = 0;
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');
        ['quiz-area','collect-area','memory-area','sedekah-area','amalan-area','hijaiyah-area'].forEach(a => document.getElementById(a).classList.add('hidden'));
        document.getElementById(mode + '-area').classList.remove('hidden');
        startTimer();
        if(mode==='quiz') startQuiz(); if(mode==='collect') startCollect(); if(mode==='memory') startMemory(); if(mode==='sedekah') startSedekah(); if(mode==='amalan') startAmalan(); if(mode==='hijaiyah') startHijaiyah();
    }

    function startQuiz() {
        let qSet = allQuiz.sort(()=>Math.random()-0.5).slice(0,5); let idx = 0;
        const show = () => {
            if(idx >= qSet.length) return finish();
            document.getElementById('question-text').textContent = qSet[idx].q;
            const cont = document.getElementById('answers-container'); cont.innerHTML = '';
            qSet[idx].a.forEach((ans, i) => {
                const b = document.createElement('button'); b.className = 'bg-white/10 p-4 rounded-xl text-white font-bold border border-white/5';
                b.textContent = ans; b.onclick = () => { if(i===qSet[idx].c){score+=10; reactAidin(true);} else reactAidin(false); idx++; show(); };
                cont.appendChild(b);
            });
        }; show();
    }

    function startCollect() {
        let spawn = setInterval(() => {
            if(currentMode !== 'collect' || totalTimeSpent >= 20) { clearInterval(spawn); return; }
            const s = document.createElement('div'); s.className = 'absolute text-5xl cursor-pointer';
            s.style.left = Math.random()*80+10+'%'; s.style.top = Math.random()*80+10+'%'; s.textContent = '‚≠ê';
            s.onclick = () => { score+=2; document.getElementById('current-score').textContent=score; s.remove(); };
            document.getElementById('collect-area').appendChild(s); setTimeout(()=>s.remove(), 1000);
        }, 500);
    }

    function startMemory() {
        const memItems = [{i:'üïå',t:'MASJID'}, {i:'üå¥',t:'KURMA'}, {i:'üåô',t:'BULAN'}];
        let matches = 0; let flipped = []; const area = document.getElementById('memory-area'); area.innerHTML = '';
        let cards = []; memItems.forEach(d => { cards.push({v:d.i, id:d.i}); cards.push({v:d.t, id:d.i}); });
        cards.sort(()=>Math.random()-0.5).forEach(data => {
            const c = document.createElement('div'); c.className = 'card';
            c.innerHTML = `<div class="card-face card-front">üïå</div><div class="card-face card-back">${data.v}</div>`;
            c.onclick = () => {
                if(flipped.length<2 && !c.classList.contains('flipped')){
                    c.classList.add('flipped'); flipped.push({el:c, id:data.id});
                    if(flipped.length===2){
                        if(flipped[0].id===flipped[1].id){ score+=15; matches++; reactAidin(true); flipped=[]; if(matches===3) finish(); }
                        else { setTimeout(()=>{flipped.forEach(f=>f.el.classList.remove('flipped')); flipped=[];},800); }
                        document.getElementById('current-score').textContent = score;
                    }
                }
            }; area.appendChild(c);
        });
    }

    function startSedekah() {
        const area = document.getElementById('sedekah-area'); const tabung = document.getElementById('tabung');
        let tX = 50; area.onmousemove = (e) => { tX = ((e.clientX - area.getBoundingClientRect().left) / area.clientWidth) * 100; tabung.style.left = Math.max(10, Math.min(90, tX)) + '%'; };
        let spawn = setInterval(() => {
            if(currentMode !== 'sedekah' || totalTimeSpent >= 30) { clearInterval(spawn); return; }
            const c = document.createElement('div'); c.className = 'absolute text-4xl'; c.textContent = 'ü™ô';
            let x = Math.random()*90; c.style.left = x+'%'; c.style.top = '0px'; area.appendChild(c);
            let pos = 0; let fall = setInterval(() => {
                pos+=5; c.style.top=pos+'px';
                if(pos>210 && Math.abs(x-tX)<15){ score+=5; reactAidin(true); c.remove(); clearInterval(fall); }
                if(pos>260){ c.remove(); clearInterval(fall); }
            }, 20);
        }, 700);
    }

    function startAmalan() {
        const amSet = [{e:'üìñ',p:10,g:true},{e:'üïå',p:10,g:true},{e:'üò°',p:-15,g:false},{e:'üç≠',p:-15,g:false}];
        let spawn = setInterval(() => {
            if(currentMode !== 'amalan' || totalTimeSpent >= 30) { clearInterval(spawn); return; }
            const o = amSet[Math.floor(Math.random()*amSet.length)];
            const d = document.createElement('div'); d.className = 'absolute text-5xl cursor-pointer';
            d.style.left = Math.random()*85+'%'; d.style.top = '0px'; d.textContent = o.e;
            document.getElementById('amalan-area').appendChild(d);
            d.onclick = () => { score+=o.p; reactAidin(o.g); d.remove(); document.getElementById('current-score').textContent=score; };
            let pos = 0; let fall = setInterval(() => { pos+=3; d.style.top=pos+'px'; if(pos>260){ d.remove(); clearInterval(fall); } }, 20);
        }, 800);
    }

    function startHijaiyah() {
        const start = Math.floor(Math.random()*(hijaiyahFull.length-4)); const correct = hijaiyahFull.slice(start, start+4);
        const shuffled = [...correct].sort(()=>Math.random()-0.5); document.getElementById('hijaiyah-hint').textContent = correct.join(' ');
        let step = 0; const targets = document.getElementById('hijaiyah-targets'); targets.innerHTML = '';
        const options = document.getElementById('hijaiyah-options'); options.innerHTML = '';
        correct.forEach((h,i)=> { targets.innerHTML += `<div id="th-${i}" class="hijaiyah-target">?</div>`; });
        shuffled.forEach(h => {
            const b = document.createElement('div'); b.className = 'hijaiyah-box'; b.textContent = h;
            b.onclick = () => {
                if(h === correct[step]){
                    const t = document.getElementById('th-'+step); t.textContent = h; t.className = 'hijaiyah-box bg-emerald-500 text-white';
                    b.style.visibility = 'hidden'; score += 20; step++; if(step === 4){ reactAidin(true); setTimeout(startHijaiyah, 800); }
                } else { score -= 5; reactAidin(false); }
                document.getElementById('current-score').textContent = score;
            }; options.appendChild(b);
        });
    }

    function startTimer() {
        startTime = Date.now();
        let limit = (currentMode==='collect'?20:30); if(currentMode==='memory'||currentMode==='quiz'||currentMode==='hijaiyah') limit = 60;
        timer = setInterval(() => {
            totalTimeSpent = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById('live-timer').textContent = totalTimeSpent;
            let progress = 100 - (totalTimeSpent / limit * 100);
            document.getElementById('timer-bar').style.width = Math.max(0, progress) + '%';
            if(totalTimeSpent >= limit) finish();
        }, 100);
    }

    function finish() {
        clearInterval(timer); document.getElementById('game-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-stars').textContent = score; document.getElementById('result-time').textContent = totalTimeSpent;
        const oldS = localStorage.getItem('aidin_s_'+currentMode) || 0; if(score > oldS) localStorage.setItem('aidin_s_'+currentMode, score);
        const oldT = localStorage.getItem('aidin_t_'+currentMode) || 999; if(totalTimeSpent < oldT) localStorage.setItem('aidin_t_'+currentMode, totalTimeSpent);
    }

    const bg = document.getElementById('background-elements'); const bgItems = ['üïå', 'üå¥', '‚≠ê', 'üåô'];
    setInterval(() => {
        const i = document.createElement('div'); i.className = 'bg-item'; i.textContent = bgItems[Math.floor(Math.random()*4)];
        i.style.left = Math.random()*100+'%'; bg.appendChild(i); setTimeout(() => i.remove(), 12000);
    }, 2000);
  </script>
</body>
</html>
