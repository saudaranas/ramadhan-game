<!doctype html>
<html lang="ms" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Ramadhan Aidin by Babah</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Baloo 2', cursive; }
    @keyframes bounce-pop { 0% { transform: scale(0); opacity: 0; } 70% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
    @keyframes float-bg { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 10% { opacity: 0.3; } 90% { opacity: 0.3; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }
    
    .bg-item { position: absolute; bottom: -100px; font-size: 2rem; pointer-events: none; z-index: 1; animation: float-bg 15s linear infinite; }
    .aidin-pop { position: fixed; top: 80px; width: 140px; z-index: 100; display: none; animation: bounce-pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    .aidin-left { left: 20px; } .aidin-right { right: 20px; }
    .aidin-container { width: 90px; height: 90px; margin: 0 auto; border-radius: 50%; border: 4px solid #FFD700; overflow: hidden; background: #fff; box-shadow: 0 8px 20px rgba(0,0,0,0.4); }
    .aidin-img { width: 100%; height: 100%; object-fit: cover; }
    .bubble { background: white; padding: 6px 10px; border-radius: 12px; font-weight: bold; font-size: 12px; margin-top: 5px; text-align: center; border: 2px solid #FFD700; color: #333; }
    
    .timer-container { width: 100%; background: rgba(255,255,255,0.1); height: 10px; border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
    #timer-bar { height: 100%; width: 100%; background: #fbbf24; transition: width 0.1s linear; }
    
    /* Memory Card Styles */
    .card { cursor: pointer; transform-style: preserve-3d; transition: transform 0.5s; height: 100px; }
    .card.flipped { transform: rotateY(180deg); }
    .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 15px; font-weight: bold; padding: 5px; text-align: center; }
    .card-front { background: #4f46e5; color: white; border: 2px solid rgba(255,255,255,0.2); }
    .card-back { background: white; color: #1e1b4b; transform: rotateY(180deg); border: 3px solid #FFD700; }
  </style>
</head>
<body class="h-full overflow-hidden bg-[#1a1a3e]">
  <div id="app" class="min-h-full w-full relative overflow-hidden" style="background: linear-gradient(180deg, #1a1a3e 0%, #2d1b4e 100%);">
    
    <div class="absolute top-4 w-full text-center z-50 pointer-events-none">
        <h2 class="text-white/40 text-[10px] tracking-widest uppercase font-bold">Game Ramadhan Aidin by Babah</h2>
    </div>

    <div id="background-elements" class="fixed inset-0 pointer-events-none"></div>

    <div id="aidin-reaction" class="aidin-pop">
        <div class="aidin-container"><img id="aidin-face" src="" class="aidin-img"></div>
        <div id="aidin-bubble" class="bubble">Wah!</div>
    </div>

    <div class="relative z-10 min-h-full flex flex-col items-center justify-center p-4">
      
      <div id="home-screen" class="text-center max-w-md w-full">
        <div class="text-7xl mb-4">üåô</div>
        <h1 class="text-4xl font-extrabold text-yellow-300 mb-1 drop-shadow-xl">Ramadhan Aidin</h1>
        <p class="text-pink-300 text-lg font-bold mb-6">by Babah ‚ù§Ô∏è</p>
        
        <div class="space-y-3">
          <button onclick="startGame('quiz')" class="w-full bg-emerald-500 text-white text-xl font-bold py-4 rounded-2xl shadow-lg hover:scale-105 transition-transform border-b-4 border-emerald-700">Kuiz Ramadhan üïå</button>
          <button onclick="startGame('collect')" class="w-full bg-purple-500 text-white text-xl font-bold py-4 rounded-2xl shadow-lg hover:scale-105 transition-transform border-b-4 border-purple-700">Kira Bintang ‚≠ê</button>
          <button onclick="startGame('memory')" class="w-full bg-orange-500 text-white text-xl font-bold py-4 rounded-2xl shadow-lg hover:scale-105 transition-transform border-b-4 border-orange-700">Kad Memori üé¥</button>
        </div>

        <div class="mt-8 bg-white/10 backdrop-blur-md rounded-xl p-3 inline-block px-6">
            <p class="text-gray-300 text-[10px] tracking-widest">REKOD TERBAIK</p>
            <p class="text-yellow-300 text-2xl font-bold">‚≠ê <span id="high-score">0</span></p>
        </div>
      </div>

      <div id="game-screen" class="hidden text-center max-w-lg w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-white/20">
          <div class="flex justify-between items-center mb-2">
            <div id="game-label" class="text-white text-xs font-bold uppercase tracking-widest">Game</div>
            <div class="bg-indigo-600 text-white px-3 py-1 rounded-full font-bold text-sm">Skor: <span id="current-score">0</span></div>
          </div>
          
          <div class="timer-container"><div id="timer-bar"></div></div>
          
          <div id="quiz-area" class="hidden">
            <h2 id="question-text" class="text-xl font-bold text-white mb-6 min-h-[60px]"></h2>
            <div id="answers-container" class="grid grid-cols-1 gap-3"></div>
          </div>

          <div id="collect-area" class="hidden relative h-64 bg-black/20 rounded-2xl overflow-hidden mb-4 border border-white/10"></div>

          <div id="memory-area" class="hidden grid grid-cols-3 gap-2"></div>
        </div>
      </div>

      <div id="result-screen" class="hidden text-center max-w-md w-full">
        <div class="bg-white/10 backdrop-blur-xl rounded-3xl p-10 shadow-2xl border border-white/20">
          <h2 id="result-title" class="text-3xl font-extrabold text-yellow-300 mb-2">Hebat Aidin!</h2>
          <div class="text-5xl mb-6">‚≠ê <span id="result-stars" class="text-yellow-400 font-bold">0</span></div>
          <button onclick="location.reload()" class="w-full bg-emerald-500 text-white font-extrabold py-4 rounded-xl text-xl border-b-4 border-emerald-700">Main Lagi</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    const GAMBAR_AIDIN_SENYUM = "https://i.postimg.cc/Bbz5NjGs/happy.jpg"; 
    const GAMBAR_AIDIN_SEDIH = "https://i.postimg.cc/fWPYGS6w/sad.jpg";   
    const SOUND_BETUL = new Audio("https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3");
    const SOUND_SALAH = new Audio("https://assets.mixkit.co/active_storage/sfx/2959/2959-preview.mp3");

    let highScore = localStorage.getItem('aidinHighScore') || 0;
    let score = 0;
    let currentMode = '';
    let timer;
    document.getElementById('high-score').textContent = highScore;

    // --- LOGIK REAKSI AIDIN ---
    function reactAidin(isCorrect, msg) {
        const div = document.getElementById('aidin-reaction');
        const img = document.getElementById('aidin-face');
        const bub = document.getElementById('aidin-bubble');
        div.classList.remove('aidin-left', 'aidin-right');
        div.classList.add(Math.random() > 0.5 ? 'aidin-left' : 'aidin-right');
        div.style.display = 'block';
        if(isCorrect) { img.src = GAMBAR_AIDIN_SENYUM; bub.textContent = msg || "Betul!"; SOUND_BETUL.play(); }
        else { img.src = GAMBAR_AIDIN_SEDIH; bub.textContent = "Cuba lagi!"; SOUND_SALAH.play(); }
        setTimeout(() => div.style.display = 'none', 1500);
    }

    // --- GAME 1: KUIZ ---
    const questions = [
        { q: 'Makan sebelum Subuh?', a: ['Sahur', 'Berbuka'], c: 0 },
        { q: 'Buah sunnah berbuka?', a: ['Kurma', 'Epal'], c: 0 },
        { q: 'Solat malam Ramadhan?', a: ['Tarawih', 'Zohor'], c: 0 },
        { q: 'Lepas Ramadhan kita sambut?', a: ['Hari Raya', 'Hari Lahir'], c: 0 }
    ];
    let qIdx = 0;

    function startQuiz() {
        qIdx = 0;
        showQuestion();
    }

    function showQuestion() {
        if(qIdx >= questions.length) return finish();
        const q = questions[qIdx];
        document.getElementById('question-text').textContent = q.q;
        const cont = document.getElementById('answers-container');
        cont.innerHTML = '';
        startTimer(10, showQuestion); // 10 saat setiap soalan
        q.a.forEach((ans, i) => {
            const b = document.createElement('button');
            b.className = 'bg-white/10 p-4 rounded-xl text-white font-bold hover:bg-white/20';
            b.textContent = ans;
            b.onclick = () => {
                clearInterval(timer);
                if(i === q.c) { score += 10; reactAidin(true, "+10 ‚≠ê"); }
                else reactAidin(false);
                qIdx++;
                document.getElementById('current-score').textContent = score;
                setTimeout(showQuestion, 1200);
            };
            cont.appendChild(b);
        });
    }

    // --- GAME 2: TANGKAP BINTANG ---
    function startCollect() {
        startTimer(20, finish); // 20 saat main
        const area = document.getElementById('collect-area');
        area.innerHTML = '';
        let spawn = setInterval(() => {
            if(currentMode !== 'collect') { clearInterval(spawn); return; }
            const s = document.createElement('div');
            s.className = 'absolute text-3xl cursor-pointer select-none';
            s.style.left = Math.random() * 80 + 10 + '%';
            s.style.top = Math.random() * 80 + 10 + '%';
            s.textContent = '‚≠ê';
            s.onclick = () => { score += 2; document.getElementById('current-score').textContent = score; s.remove(); };
            area.appendChild(s);
            setTimeout(() => s.remove(), 1500);
        }, 800);
    }

    // --- GAME 3: KAD MEMORI (Gambar & Teks) ---
    const memData = [
        { img: 'üåô', txt: 'Bulan' }, { img: 'üïå', txt: 'Masjid' },
        { img: 'üå¥', txt: 'Kurma' }, { img: 'üçõ', txt: 'Nasi' }
    ];
    let flipped = [];

    function startMemory() {
        startTimer(40, finish);
        const area = document.getElementById('memory-area');
        area.innerHTML = '';
        const cards = [];
        memData.forEach(d => {
            cards.push({ val: d.img, id: d.img, type: 'img' });
            cards.push({ val: d.txt, id: d.img, type: 'txt' });
        });
        cards.sort(() => Math.random() - 0.5);

        cards.forEach(data => {
            const c = document.createElement('div');
            c.className = 'card';
            c.innerHTML = `<div class="card-face card-front">?</div><div class="card-face card-back">${data.val}</div>`;
            c.onclick = () => {
                if(flipped.length < 2 && !c.classList.contains('flipped')) {
                    c.classList.add('flipped');
                    flipped.push({ el: c, id: data.id });
                    if(flipped.length === 2) {
                        if(flipped[0].id === flipped[1].id) {
                            score += 15;
                            document.getElementById('current-score').textContent = score;
                            reactAidin(true, "Padanan Bijak!");
                            flipped = [];
                        } else {
                            setTimeout(() => { flipped.forEach(f => f.el.classList.remove('flipped')); flipped = []; }, 1000);
                        }
                    }
                }
            };
            area.appendChild(c);
        });
    }

    // --- SISTEM UTILITI ---
    function startTimer(sec, onEnd) {
        clearInterval(timer);
        const bar = document.getElementById('timer-bar');
        let width = 100;
        const step = 100 / (sec * 10);
        timer = setInterval(() => {
            width -= step;
            bar.style.width = width + '%';
            if(width <= 0) { clearInterval(timer); onEnd(); }
        }, 100);
    }

    function startGame(mode) {
        currentMode = mode;
        score = 0;
        document.getElementById('current-score').textContent = '0';
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');
        document.getElementById('quiz-area').classList.add('hidden');
        document.getElementById('collect-area').classList.add('hidden');
        document.getElementById('memory-area').classList.add('hidden');
        
        if(mode === 'quiz') { document.getElementById('quiz-area').classList.remove('hidden'); startQuiz(); }
        if(mode === 'collect') { document.getElementById('collect-area').classList.remove('hidden'); startCollect(); }
        if(mode === 'memory') { document.getElementById('memory-area').classList.remove('hidden'); startMemory(); }
    }

    function finish() {
        clearInterval(timer);
        document.getElementById('game-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-stars').textContent = score;
        if(score > highScore) localStorage.setItem('aidinHighScore', score);
    }

    function showScreen(id) {
        ['home-screen', 'game-screen', 'result-screen'].forEach(s => document.getElementById(s).classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    // BG Decoration
    const bg = document.getElementById('background-elements');
    const items = ['üïå', 'üå¥', 'üü¢', '‚≠ê'];
    setInterval(() => {
        const i = document.createElement('div');
        i.className = 'bg-item';
        i.textContent = items[Math.floor(Math.random()*items.length)];
        i.style.left = Math.random()*100+'%';
        bg.appendChild(i);
        setTimeout(() => i.remove(), 15000);
    }, 3000);
  </script>
</body>
</html>
